# Смарт-контракт Голосование

Смарт-контракт предназначен для создания голосований со списком кандидатов, с
возможностью других пользователей выбирать победителя. Для участия в голосовании
необходимо внести 0,01 ETH. Победитель голосования забирает всю собранную сумму
за вычетом комиссии.

## Функционал

- создавать голосование может только владелец;
- не может быть завершено по истечении заданного времени любым пользователем;
- победителю по его запросу отправляются все внесенные ETH за вычетом комиссии
  10%. Эти 10% остаются в контракте;
- только владелец может вывести комиссию;
- методы получения информации о любом голосовании;

## Доступные команды (hardhat tasks)

- `add-voting` - добавляет новое голосование. Принимает параметры `duration` (
  продолжительность голосования в секундах), `title` (заголовок голосования)
  и `candidates` (адреса кандидатов, разделённые запятыми).

```
hardhat add-voting --duration 60 --title "My voting" --candidates "0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266,0x70997970C51812dc3A010C7d01b50e0d17dc79C8,0x3C44CdDdB6a900fa2b585dd299e03d12FA4293BC"
```

- `voting-list` - выводит список голосований.

```
hardhat voting-list
```

- `voting-info` - выводит информацию по конкретному голосованию. Принимает
  параметр `voting` (идентификатор голосования).

```
hardhat voting-info --voting 0
```

- `finish-voting` - завершает голосование. Принимает параметр `voting` (
  идентификатор голосования).

```
hardhat finish-voting --voting 0
```

- `add-vote` - добавляет голос за кандидата. Принимает параметры: `voter` (адрес
  аккаунта, с которого будет засчитан голос), `voting` (идентификатор
  голосования) и `candidate` (идентификатор кандидата).

```
hardhat add-vote --voter 0x70997970c51812dc3a010c7d01b50e0d17dc79c8 --voting 0 --candidate 0
```

- `withdraw-reward` - выводит вознаграждение победителю. Принимает
  параметры: `winner` (адрес аккаунта-победителя - нужно обладать его приватным
  ключом) и `voting` (идентификатор голосования).

```
hardhat withdraw-reward --winner 0x70997970C51812dc3A010C7d01b50e0d17dc79C8 --voting 0
```

- `get-commission` - выводит информацию о доступной к выводу комиссии.

```
hardhat get-commission
```

- `withdraw-commission` - выводит доступную комиссию владельцу контракта.

```
hardhat withdraw-commission
```

### Чек-лист

- [x] проект инициализирован на фреймворке [hardhat](https://hardhat.org/);
- [x] корректно настроен hardhat.config.ts, у hardhat
  есть [подробная документация](https://hardhat.org/config/) по каждому
  параметру;
- [x] все приватные данные (приватный ключ, мнемоник, ключи доступа Infura,
  Alchemy...) сохранены в файл .env;
- [x] в контракте имеется функция создания голосования;
- [x] в контракте имеется функция участия в голосовании;
- [x] в контракте имеется функция вывода комиссий;
- [x] в контракте имеется функция вывода вознаграждения;
- [x] в контракте имеется функция завершения голосования;
- [x] в контракте имеется функция для вывода списка голосований;
- [x] в контракте имеется функция для вывода информации о конкретном
  голосовании;
- [x] в папке test имеются файлы unit-тестов, обеспечивающих 100% покрытие
  контракта по всем показателям (statements, branch, functions, lines) согласно
  solidity-coverage;
- [x] в папке scripts имеется скрипт деплоя в тестовую сеть Rinkeby;
- [x] в папке tasks имеются hardhat task, позволяющие взаимодействовать с
  опубликованным контрактом (добавить голосование, участвовать в голосовании,
  завершить голосование и др.);
